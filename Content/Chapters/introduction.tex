\chapter{Introduction}

\section{The Capacitated Vehicle Routing Problem (CVRP)}

The Capacitated Vehicle Routing Problem (CVRP), first presented in \textcite{dantzig1959truck},
can be considered as a generalization of
the well-known Travelling Salesman Problem (TSP), and it is a
very well-known combinatorial optimization problem.
The problem consists in finding an optimal route for a delivery problem
starting from a common point called the depot,
where a homogeneous fleet composed of a fixed number of trucks, subject to capacity constraints,
need to serve customer demands.
Given as input: a weighted graph, the customer demands and the vehicle capacity,
the problem consists in minimizing the overall travel distance,
while serving all the customers.

The CVRP belongs to the wider class of problems known as the Vehicle Routing Problems (VRPs).
There are many variations of VRPs proposed in the literature such as
the Vehicle Routing Problem with Time Windows (VRPTW) and many others, but still, CVRP remains
probably the most central and studied one.
For a more complete survey of the various variations of the VRP problems refer to \cite{poggi2014chapter}.

\section{Mathematical formulations}

In this section we define the CVRP through two very well known mathematical formulations:
the three-index flow formulation presented in \textcite{toth_vehicle_2002} and
the Set Partitioning (SP) formulation presented in \textcite{balinski1964integer}.
Despite the SP formulation being older, in later years thanks to algorithmic advances
and the development of efficient Branch \& Price frameworks, it has become the defacto
state-of-the-art core component for solving CVRP problems \parencite{pessoa2020generic}.

We begin the section by defining some mathematical quantities that will be used throughout
the remainder of the chapter.

\medskip

Let $G = \Tuple*{V, E}$ denote a complete undirected graph, where $V = \Set*{0, 1, \dots, N - 1}$ denotes the set of nodes,
$E = \Set*{e = (i, j) \mid \allowbreak i,j \in V, \allowbreak  j \ge i + 1}$ the set of edges, and $N$ the number of nodes in the graph.
The value $0 \in V$ is used to denote the depot node.
For convenience, we define $V_0 = V \setminus \Set*{0}$ to express the set of customers, and $N_0 = N - 1$ to denote the number of customers.
Let $\delta(S)$ with $S \subseteq V$ denote the edges crossing the set $S$ and its complement $\overline{S} = V \setminus S$.
More formally we can express $\delta(S)$ as $\delta(S) = \Set*{ (i, j) \in E \mid i \in \Expr*{S \cap V}, j \in \Expr*{ \overline{S} \cap V } }$.
For brevity, we also define $\delta(i) = \delta(\Set*{i})$ to denote the set of edges incident to node $i \in V$.

Let $q_{i} \in \R, q_{i} \ge 0$ denote the demand function, which represent the required demand in visiting a vertex $i \in V$.
For convenience we fix $q_0 = 0$.
Let $d_{ij} \in \R, d_{ij} > 0$ denote the distance function between a pair of nodes  $i, j \in V$.
We assume that the distance function is symmetric $d_{ij} = d_{ji}$ and satisfies the triangle inequality $d_{ij} \le d_{ih} + d_{hj}$.
Finally, given the total number of trucks $K > 0, K \in \N_+$ and an upper bound $Q \in \R,Q \ge 0$ representing the capacity of each truck, we can finally express the CVRP problem as an Integer Programming (IP) formulation.

A feasible solution to the CVRP problem consists of $K$ tours starting from the depot node, each customer is visited exactly once, and the sum of the customer demands visited in each tour does not exceed the truck capacity $Q$.
An optimal solution to the CVRP is a feasible solution which minimizes the sum of the overall edge weights across all the tours.
In the remainder of the section we introduce the two most common IP mathematical formulations for the CVRP.

\subsubsection{The three-index flow formulation}
The tree-index flow formulation, first presented in \textcite{toth_vehicle_2002}, is an IP model using $O(N^2 K + N K)$ binary variables.

We define a set of binary variables $x_{ijk} \in \Set*{0, 1}, (i, j) \in E, k = 1, \dots, K$, to encode whether vehicle $k$ traverses edge $(i, j)$,
and another set of binary variables $y_{ik} \in \Set*{0, 1}, i \in V, k = 1, \dots, K$ to encode whether truck $k$ serves node $i \in V$.

\begin{align}
	\min_{x, y} \quad z_\mt{CVRP}(x, y) & =  \sum_{k = 1}^K \sum_{(i, j) \in E} d_{ij} x_{ijk} \label{eq:three-index-flow-obj-func}                                                                                                                          \\
	                                    & \sum_{k = 1}^K y_{ik}                                                                     & \quad \forall i \in V_0                                              \label{eq:three-index-flow-all-customers-visited} \\
	                                    & \sum_{k = 1}^K y_{0k}                                                                     & \label{eq:three-index-flow-tour-starts-and-ends-at-depot}                                                              \\
	                                    & \sum_{\EqStackTwo{j \in V}{(i, j) \in E}} x_{ijk} = 2 y_{ik}                              & \quad \forall i \in V,\ k = 1, \dots, K \label{eq:three-index-flow-force-visited-customer-if-flow}                     \\
	                                    & \sum_{i \in V} q_i y_{ik} \le Q                                                           & \quad \forall k = 1, \dots, K \label{eq:three-index-flow-force-resource-upper-bound}                                   \\
	                                    & \sum_{i, j \in S} x_{ijk} \le |S| - 1                                                     & \quad \forall S \subseteq V, |S| \ge 2,\ k = 1, \dots, K \label{eq:three-index-flow-secs}                              \\
	                                    & x_{ijk}                   \in \Set*{0, 1}                                                 & \quad \forall (i, j) \in E,\ k = 1, \dots, K             \label{eq:three-index-flow-x-mip-var-bounds}                  \\
	                                    & y_{ik}                    \in \Set*{0, 1}                                                 & \quad \forall i \in V,k = 1, \dots, K  \label{eq:three-index-flow-y-mip-var-bounds}
\end{align}

where \eqref{eq:three-index-flow-obj-func} is the objective function to be minimized (i.e. the overall travel distance),
constraint \eqref{eq:three-index-flow-all-customers-visited} force all customers to be served exactly once,
constraint \eqref{eq:three-index-flow-tour-starts-and-ends-at-depot} force all the truck tours to start at the depot and end at the same spot,
constraint \eqref{eq:three-index-flow-force-visited-customer-if-flow} binds the $y_{ik}$ variables to appropriate $x_{ijk}$ variables,
namely if truck $k$ serves customer $i$, then at least two incident edges to $i$ must be picked in the tour of truck $k$,
constraint \eqref{eq:three-index-flow-force-resource-upper-bound} is the resource upper bound contraint and it ensures that the demand served by each truck does not exceed the truck capacity,
finally, constraint \eqref{eq:three-index-flow-secs} are the TSP subtour elimination constraints (SECs) and are used to avoid the formation of spurious unconnected subtours.
Since the number of SECs is exponential in the number of nodes $N$, they are usually not inserted statically in the model but are generated lazily within the running time of the resolution process.

The three-index flow formulation is usually solved through the usage of a standard Branch \& Cut framework approach.
Modern CVRP solvers, instead, rely on a different mathematical formulation and employ a  mostly Branch \& Price based-approach (although hybridization are also possible).
The Set Partitioning (SP) formulation is the main starting point employed by Branch \& Price solvers.
In this thesis we will mostly concentrate onm Branch \& Price approeaches for the CVRP.
In the next subsection we will introduce the set partitioning formulation, and in the remainder of the section
we will briefly introduce the key ingredients of modern Branch \& Price solvers.

\subsubsection{The Set Partitioning (SP) formulation}
The Set Partitioning (SP) integer programming formulation presented in \textcite{balinski1964integer},
works substantially differently from the three-index flow formulation or any other commonly employed
IP formulations, by using a very small number of constraints while offloading all the model complexity to an exponential number of binary variables.

Let $P = \Set*{p \mid p\ \text{is a single-truck feasible route}}$ be the set of all feasible routes,
let $\lambda_p \in \Set*{0, 1}$ be a binary variable indicating whether route $p$ is used
and finally let $a_{ijp} \in \Set*{0, 1}$ be a "static encoding" for a route $p$, i.e. if arc $(i, j)$ is used by route $p$.
We can write the full model as:


\begin{align}
	\min_{\lambda} \quad z_\mt{SP}(\lambda) & = \sum_{p \in P} \sum_{(i, j) \in E} d_{ij} a_{ijp} \lambda_p \label{eq:set-partitioning-obj-func}                                                                                                                                           \\
	                                        & \sum_{p \in P} \sum_{(i, j) \in \delta(i)} a_{ijp} \lambda_p = 2                                   & \quad \forall i \in V_0                                              \label{eq:set-partitioning-customers-visited-by-exactly-one-route} \\
	                                        & \sum_{p \in P} \lambda_{p} = K                                                                     & \quad \forall i \in V_0                                              \label{eq:set-partitioning-K-routes}                               \\
	                                        & \lambda_p                    \in \Set*{0, 1}                                                       & \quad \forall p \in P \label{eq:set-partitioning-lambda-mip-var-bounds}
\end{align}

where \eqref{eq:set-partitioning-obj-func} is the objective function to be minimized (i.e. the overall travel distance),
constraint \eqref{eq:set-partitioning-lambda-mip-var-bound} is the integrality constraint of all the feasible routes,
constraint \eqref{eq:set-partitioning-customers-visited-by-exactly-one-route} forces each customer to be served from a single unique route,
constraint \eqref{eq:set-partitioning-K-routes} enforces that exactly $K$ routes are picked.

As one may guess, the SP formulation cannot be used in as-is practice due the exponential number of binary variables.
However, by employing a properly engineered column generation approach embedde inside a Branch \& Price framework has
been shown to work remarkably well for the standard employed CVRP instances of the literature.

In the next sections we will introduce the Branch \& Price framework and the column generation approach, key componenets employed in modern state-of-the-art CVRP solvers.




\section{Resolution methods}

\subsection{Branch and Cut}

\subsection{Branch and Price}

\subsubsection{Column generation and the Pricing Problem}

\section{Literature Review}

\begin{quote}
	Before 1980 very few exact algorithms for cvrp and vrptw had been
	proposed, but in the early 1980s two new exact methods where proposed.
	From this point the history of exact methods for cvrp and vrptw can
	be divided into three phases. The first phase was the introduction of the
	Set Partition and the development of Branch-and-Cut-and-Price (bp) algo-
	rithms using a relaxed pricing problem. The second was the development of
	Branch-and-Cut (bac) algorithms. In the current phase the pricing problem
	is no longer relaxed and cuts in the master problem of the Branch-and-Cut-
	and-Price algorithms is used. The first two phases where started at the same
	point in time and there is still development on the algorithms in the context
	of cvrp and vrptw. The algorithms from these two phases are also used
	on several other variants of the Vehicle Routing Problem. The third phase
	was started in the middle of the 2000s and the algorithms from this phase
	are currently the best overall performing algorithms \cite{jepsen_branch-and-cut_2011}.
\end{quote}

\section{Thesis Contributions}
The objective of the thesis is to study the feasibility of employing a MIP solver
based on a Branch \& Cut Framework to solve the pricing problem induced in solving
CVRP instances.
A similar study was already performed in \cite{Jepsen2014}.
Part of the objective of the thesis is to revisit the work of Jepsen comparing
the performance of a Branch \& Cut Framework against the state of the art work
\cite{pessoa2020generic}.
One of the core contributions is the verification of whether a Branch \& Cut Framework
can perform better than the dynamic labeling algorithm employed \cite{pessoa2020generic},
especially when the optimal routes tend to be longer than usual.

One of the main issues in the work of \cite{pessoa2020generic}, is that
most of the algorithms were optimized for dated datasets, the problem
is that these instances are quite anachronistic, in practice, in modern
distribution problems, the vehicle capacity is rarely the bottleneck.
The same truck within a single day is meant to serve a higher number of customers
compared to the widely employed standard datasets.
It is known that the labeling algorithm tend to deteriorate in performance when
the optimal routes that need to be generated tend to become longer.

This thesis aims at providing a first proof-of-concept answer to the question
whether it is better to employ a Branch \& Cut framework to solve the pricing problem
when the routes become longer.


\section{Outline}
